## numbers >= 10^5 will be denoted in scientific notation,
## and rounded to 2 digits
options(scipen = 3, digits = 3)
library(rvest)
webpage <- read_html(url = "https://money.cnn.com/data/us_markets/")
read_html(url = "https://money.cnn.com/data/us_markets/")
library(httr)
library(rvest)
library(xml2)
base_url <- "https://money.cnn.com/data/us_markets/"
webpage <- read_html(url = base_url)
library(httr)
library(rvest)
library(xml2)
base_url <- "https://money.cnn.com/data/us_markets/"
webpage <- read_html(url = base_url)
base_url <- "https://money.cnn.com/data/us_markets/"
webpage <- read_html(x = base_url)
session_detials <- html_session(base_url)
session_details
webpage
sector_names <- html_text(html_nodes(webpage, "//th"))
sector_names
sector_names <- html_text(html_nodes(webpage, "/th"))
sector_names
sector_names <- html_text(html_nodes(webpage, "th"))
sector_names
sector_names <- html_text(html_nodes(webpage, "td a"))
sector_names
sector_names <- html_text(html_nodes(webpage, "//tr[(((count(preceding-sibling::*) + 1) = 3) and parent::*)]//*[contains(concat( " ", @class, " " ), concat( " ", "wsod_firstCol", " " ))] | //tr[(((count(preceding-sibling::*) + 1) = 4) and parent::*)]//*[contains(concat( " ", @class, " " ), concat( " ", "wsod_firstCol", " " ))] | //tr[(((count(preceding-sibling::*) + 1) = 5) and parent::*)]//*[contains(concat( " ", @class, " " ), concat( " ", "wsod_firstCol", " " ))] | //tr[(((count(preceding-sibling::*) + 1) = 6) and parent::*)]//*[contains(concat( " ", @class, " " ), concat( " ", "wsod_firstCol", " " ))] | //tr[(((count(preceding-sibling::*) + 1) = 8) and parent::*)]//*[contains(concat( " ", @class, " " ), concat( " ", "wsod_firstCol", " " ))] | //tr[(((count(preceding-sibling::*) + 1) = 7) and parent::*)]//*[contains(concat( " ", @class, " " ), concat( " ", "wsod_firstCol", " " ))] | //tr[(((count(preceding-sibling::*) + 1) = 9) and parent::*)]//*[contains(concat( " ", @class, " " ), concat( " ", "wsod_firstCol", " " ))] | //tr[(((count(preceding-sibling::*) + 1) = 10) and parent::*)]//*[contains(concat( " ", @class, " " ), concat( " ", "wsod_firstCol", " " ))] | //tr[(((count(preceding-sibling::*) + 1) = 11) and parent::*)]//*[contains(concat( " ", @class, " " ), concat( " ", "wsod_firstCol", " " ))] | //tr[(((count(preceding-sibling::*) + 1) = 12) and parent::*)]//*[contains(concat( " ", @class, " " ), concat( " ", "wsod_firstCol", " " ))] | //tr[(((count(preceding-sibling::*) + 1) = 2) and parent::*)]//*[contains(concat( " ", @class, " " ), concat( " ", "wsod_firstCol", " " ))]"))
sector_names
sector_names <- html_text(html_nodes(webpage, "[href*='sectors']")) # all names include "sectors" in their href
sector_names
html_text(html_nodes(webpage, "td span"))
html_text(html_nodes(webpage, "tr th"))
html_text(html_nodes(webpage, "/tr th"))
html_text(html_nodes(webpage, "[class$='ChangePct']"))
div_tables <- html_table(html_nodes(webpage, "div table"))
div_tables[1]
# the only thing that changes is the "symbol = COMPANY ACRONYM"
base_url
div_tables[1]
html_text(html_nodes(webpage, "//*[contains(concat( " ", @class, " " ), concat( " ", "wsod_symbol", " " ))]")
html_text(html_nodes(webpage, "//*[contains(concat(@class), concat(wsod_symbol))]")
a
html_text(html_nodes(webpage, "//*[contains(concat(@class), concat(wsod_symbol))]"))
html_text(html_nodes(webpage, "wsod_symbol"))
html_text(html_nodes(webpage, "td a"))
company_acronym <- html_text(html_nodes(webpage, "td a"))[[1:10]]
company_acronym <- html_text(html_nodes(webpage, "td a"))[1:10]
urls <- paste0("https://money.cnn.com/quote/quote.html?symbol=", company_acronym)
urls
html_text(html_nodes(webpage, ".HeadlineList a"))
html_text(html_nodes(webpage, "ul a"))
html_text(html_nodes(webpage, "HeadlineList"))
html_text(html_nodes(webpage, ".HeadlineList"))
html_text(html_nodes(webpage, "HeadlineList a"))
html_text(html_nodes(webpage, ".HeadlineList a"))
html_attr(html_nodes(webpage, "div div"))
s
html_attrs(html_nodes(webpage, "div div"))
html_attrs(html_nodes(webpage, "div div"))[[1]]
html_attrs(html_nodes(webpage, "div div")).[[1]]
html_attrs(html_nodes(webpage, ".wsod_disclaimer"))[[1[]]]
html_attrs(html_nodes(webpage, ".wsod_disclaimer"))
html_attrs(html_nodes(webpage, ".wsod_disclaimer > span"))
html_attrs(html_nodes(webpage, ".wsod_StockTimestamp"))
html_attr(html_nodes(webpage, ".scale div"))
html_attrs(html_nodes(webpage, ".scale div"))
html_attr(html_nodes(webpage, "img"), "src")
html_attrs(html_nodes(webpage, ".scale div"), "class")
html_attr(html_nodes(webpage, ".scale div"), "class")
html_attr(html_nodes(webpage, "img"), "src")
